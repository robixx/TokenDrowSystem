
@{
    ViewData["Title"] = "ToKen History";
    var purchased = (List<int>)ViewBag.Purchased;
    int totalTickets = ViewBag.TotalTickets;
}
<style>
    .text-primary-bs {
        color: #4f46e5 !important; 
    }
    body{
        background: #f6fcf7;
    }
    .bg-primary-bs {
        background-color: #4f46e5 !important; 
    }

    .btn-primary-bs {
        background-color: #4f46e5;
        border-color: #4f46e5;
        transition: background-color 0.2s, border-color 0.2s;
    }

        .btn-primary-bs:hover {
            background-color: #4338ca; 
            border-color: #4338ca;
        }

    
    .ticket-number-grid {
       
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
        gap: 1rem; 
    }

    .ticket-box {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 55px;
        font-weight: 700;
        font-size: 1rem;
        border-radius: 0.5rem;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        user-select: none;
    }
    
    .owned-ticket {
        background-color: #a95116;
        color: white;
        border: 2px solid #a95116;
    }
   
    .other-ticket {
        background-color: #ffffff;
        color: #495057; 
        border: 1px solid #dee2e6; 
    }
</style>

<!-- Main Content Container -->

<main class=" max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">  
   
    <div class="bg-white p-2 rounded-xl shadow-lg mb-8 border-l-4 border-indigo-600">
        <div class="row text-center">
            <h4>Tricket history</h4>
        </div><hr />
        <div class="row g-3 mt-2">
            <div class="col-6 col-md-6">
                <p class="text-sm font-medium text-gray-500">Current Date</p>
                <p class="text-base font-semibold text-gray-900"><span data-lucide="Calendar"></span> @DateTime.Now.ToString("dd-MMM-yyyy")</p>
            </div>
            <div class="col-6 col-md-6 text-end">
                <p class="text-sm font-medium text-gray-500">Total Tickets Owned</p>
                <p class="text-base font-semibold text-indigo-600"><span data-lucide="Ticket"></span> @ViewBag.TotalOwned Tickets</p>
            </div>
           
           
        </div>
    </div>

    <!-- Ticket Numbers Grid Section -->
    <div class="bg-white p-5 sm:p-8 rounded-xl shadow-lg">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">
            Booking Your Ticket Numbers
        </h2>      

        <!-- The Ticket Grid -->
        <div class="ticket-number-grid">
            @for (int i = 1; i <= totalTickets; i++)
            {
                bool owned = purchased.Contains(i);
                string cssClass = owned ? "owned-ticket" : "other-ticket";

                <div class="ticket-box @cssClass">
                    @i.ToString("D2")
                </div>
            }

        </div>
    </div>

</main>

<script type="module">
    import { createIcons, MapPin, Calendar, Ticket, CheckCircle, Clock, Download, ArrowLeft } from 'https://cdn.jsdelivr.net/npm/lucide-esm@latest/umd/lucide-esm.js';
    document.addEventListener('DOMContentLoaded', () => {
        createIcons({
            icons: { MapPin, Calendar, Ticket, CheckCircle, Clock, Download, ArrowLeft },
            attrs: { width: 18, height: 18, class: 'inline-block mr-2' }
        });
    });
</script>